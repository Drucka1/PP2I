{% extends 'base.html' %}

{% block title %}Index{% endblock %}

{% block content %}
    <p><strong>Hello
        {% if 'forname' in session %}
            {{session['forname']|title}}
        {% elif 'user' in session %}
            {{session['user']|title}}
        {% endif%}
    </strong></p>

    <div class="main-title">
  
    <h2>RECIPE OF THE MOMENT</h2>
    <form action="/index" method="post">
        {% if search %}
            <input type="text" name="nom_recette" value="{{search}}"/> <input type="submit" value="Search" />
        {% else %}
            <input type="text" name="nom_recette"/> <input type="submit" value="Search" />
        {% endif %}
    </form>
</div>
    <div class="recipes">
    {% if recettes%}
        {% for elt in recettes%}
            <div id="{{elt['id']}}" class="recipe"> 
                <form action="/index" method="post">
                    {% if search %}
                        <input type="text" name="nom_recette" value="{{search}}" hidden/>
                    {% endif %}
                    <input type="name" name="change_fav" on hidden/>
                    <input type="text" name="id_recette" value="{{elt['id']}}" hidden/>
                    {% if 'user' in session and elt['id'] in session['favori']%}
                        <input type="checkbox" name="fav" onclick="this.form.submit()" checked/><label>Favorite</label> 
                    {% else %}
                        <input type="checkbox" name="fav" onclick="this.form.submit()"/><label>Favorite</label> 
                    {% endif %}
                </form>
                <h2><a href="recipe/{{elt['id']}}">{{elt['nom']|title}}</h2>
                <img src="{{elt['image']}}" loading="lazy"></a>
                
            </div>
        {% endfor %}
    {% endif %}
    </div>
{% endblock %}